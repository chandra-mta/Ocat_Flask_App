import sys, os
from dotenv import load_dotenv
#For finding the application scripts in directory where the cus script is located
sys.path.insert(0,f"{os.path.dirname(os.path.realpath(__file__))}")
sys.path.insert(1,f"{os.path.dirname(os.path.realpath(__file__))}/cus_app")

from cus_app            import create_app, db       #--- in app/__init__.py
from cus_app.models     import User

from config             import Config, ProdConfig, DevConfig


if os.environ.get('FLASK_RUN_FROM_CLI') == 'true':
    load_dotenv("/data/mta4/CUS/Data/.localhostenv")
else:
    load_dotenv("/data/mta4/CUS/Data/.env")

if os.environ.get('FLASK_RUN_FROM_CLI') == 'true':
    #Running app on local host flask server, run with DevConfig
    application = create_app(DevConfig)
elif os.environ.get('LIVE_DIR') == os.path.abspath(os.path.dirname(__file__)):
    #Run with ProdConfin if script is running in the live web directory, otherwise default to DevConfig
    application = create_app(ProdConfig)
else:
    application = create_app()
